!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["match-store"]=e():t["match-store"]=e()}(this,function(){return function(t){function e(r){if(s[r])return s[r].exports;var i=s[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";function r(t){this.records={},this.keys=[],this.settings=t||{}}function i(t){var e=this.settings.prefix||n.prefix;t=e+t;var s=this.records[t];return s||(this.keys.push(t),s=this.records[t]=[]),s}var o=s(1),n={prefix:"~",match:function(t,e){return t===e}};t.exports=r,r.prototype.constructor=r,r.prototype.get=function(t){for(var e,s,r,i,o=this.settings.prefix||n.prefix,c=this.settings.match||n.match,h=this.keys,u=[],p=0;p<h.length;p++)if(e=h[p],s=e.substr(o.length),c(s,t)){r=this.records[e];for(var f=0;f<r.length;f++)i=r[f],i.active&&u.push(i.use()),i.active||(r.splice(f,1),f--);0===r.length&&this.del(s.substr(1))}return u},r.prototype.put=function(t,e,s){var r=new o(e,s);i.call(this,t).push(r)},r.prototype.del=function(t,e){var s=this.settings.prefix||n.prefix;t=s+t;var r,i=this.records[t];if(i){if(2===arguments.length)for(var o=0;o<i.length;o++)i[o].is(e)&&(i[o].active=!1,i.splice(o,1),o--);1!==arguments.length&&0!==i.length||(this.records[t]=void 0,r=this.keys.indexOf(t),r!==-1&&this.keys.splice(r,1))}}},function(t,e){"use strict";function s(t,e){this.active=!0,this.uses=e||1/0,this.value=t}t.exports=s,s.prototype.constructor=s,s.prototype.is=function(t){return t===this||t===this.value},s.prototype.use=function(){if(!this.active||this.uses<1)throw new Error("Can't use an inactive record");return this.uses--,this.active=this.uses>=1,this.value}}])});
//# sourceMappingURL=match-store.min.js.map