!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["wildcard-store"]=e():t["wildcard-store"]=e()}(this,function(){return function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function i(t){this._records={},this._paths=[],this._settings=t||{}}var s=r(1),n=r(2),o={delimeter:".",prefix:"~"};t.exports=i,i.prototype.constructor=i,i.prototype.get=function(t){var e,r,i,s,h=this._settings.delimeter||o.delimeter,a=this._settings.prefix||o.prefix,u=this._paths,p=[],c=t.split(h);this.validatePath(c);for(var f=0;f<u.length;f++)if(e=u[f],r=e.substr(a.length).split(h),e===t||n(c,r)){i=this._records[e];for(var l=0;l<i.length;l++)s=i[l],s.active&&p.push(s.use()),s.active||(i.splice(l,1),l--);0===i.length&&this.del(e.substr(1))}return p},i.prototype.set=function(t,e,r){var i=new s(e,r);this.getOrCreatePath(t).push(i)},i.prototype.del=function(t,e){var r=this._settings.prefix||o.prefix;t=r+t;var i,s=this._records[t];if(s){if(2===arguments.length)for(var n=0;n<s.length;n++)s[n].is(e)&&(s[n].active=!1,s.splice(n,1),n--);1!==arguments.length&&0!==s.length||(this._records[t]=void 0,i=this._paths.indexOf(t),i!==-1&&this._paths.splice(i,1))}},i.prototype.getOrCreatePath=function(t){var e=this._settings.delimeter||o.delimeter,r=this._settings.prefix||o.prefix,i=t.split(e);this.validatePath(i),t=r+t;var s=this._records[t];return s||(this._paths.push(t),s=this._records[t]=[]),s},i.prototype.validatePath=function(t){for(var e=0,r=0;r<t.length;r++){if(0===t[r].length||t[r].search(/^\s*$/)!==-1)throw new Error("Path must not contain empty or whitespace-only fragments");if(("*"===t[r]||"**"===t[r])&&(e++,e>1))throw new Error("Path must not contain more than one wildcard")}}},function(t,e){"use strict";function r(t,e){if(!t)throw new Error("Can't create a record without a value");this.active=!0,this.uses=e||1/0,this.value=t}t.exports=r,r.prototype.constructor=r,r.prototype.is=function(t){return t===this||t===this.value},r.prototype.use=function(){if(!this.active||this.uses<1)throw new Error("Can't use an inactive record");return this.uses--,this.active=this.uses>=1,this.value}},function(t,e){"use strict";function r(t,e,r){for(var i=0;i<r;i++){if("**"===t[i]||"**"===e[i])return!0;if(t[i]!==e[i]&&"*"!==t[i]&&"*"!==e[i])return!1}return r===t.length&&r===e.length}t.exports=function(t,e){if("**"===t[0]&&"**"===e[e.length]||"**"===e[0]&&"**"===t[t.length])return!0;var i=Math.min(t.length,e.length);if(!r(t,e,i))return!1;for(var s=new Array(i),n=new Array(i),o=0;o<i;o++)s[o]=t[t.length-o-1],n[o]=e[e.length-o-1];return!!r(s,n,i)}}])});
//# sourceMappingURL=wildcard-store.min.js.map